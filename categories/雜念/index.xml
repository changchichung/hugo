<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
    <channel>
        <title>雜念 on MCの部落</title>
        <link>https://h.cowbay.org/categories/%E9%9B%9C%E5%BF%B5/</link>
        <description>Recent content in 雜念 on MCの部落</description>
        <generator>Hugo -- gohugo.io</generator>
        <language>en-us</language>
        <lastBuildDate>Fri, 03 Jan 2020 11:45:56 +0800</lastBuildDate><atom:link href="https://h.cowbay.org/categories/%E9%9B%9C%E5%BF%B5/index.xml" rel="self" type="application/rss+xml" /><item>
        <title>[碎念] Synology 群暉的文件不知道在工三小 / what a piss in synology document</title>
        <link>https://h.cowbay.org/p/%E7%A2%8E%E5%BF%B5-synology-%E7%BE%A4%E6%9A%89%E7%9A%84%E6%96%87%E4%BB%B6%E4%B8%8D%E7%9F%A5%E9%81%93%E5%9C%A8%E5%B7%A5%E4%B8%89%E5%B0%8F-/-what-a-piss-in-synology-document/</link>
        <pubDate>Fri, 03 Jan 2020 11:45:56 +0800</pubDate>
        
        <guid>https://h.cowbay.org/p/%E7%A2%8E%E5%BF%B5-synology-%E7%BE%A4%E6%9A%89%E7%9A%84%E6%96%87%E4%BB%B6%E4%B8%8D%E7%9F%A5%E9%81%93%E5%9C%A8%E5%B7%A5%E4%B8%89%E5%B0%8F-/-what-a-piss-in-synology-document/</guid>
        <description>&lt;img src="https://h.cowbay.org/images/post-default-16.jpg" alt="Featured image of post [碎念] Synology 群暉的文件不知道在工三小 / what a piss in synology document" /&gt;&lt;p&gt;2020/01/02  2020 上工的第一天，公司碩果僅存的唯一一台 Synology DS415+ 也終於掛了&lt;/p&gt;
&lt;p&gt;開機沒多久就連不上，反覆幾次之後，出現了開機時所有燈號都狂閃的狀況&lt;/p&gt;
&lt;p&gt;終於宣告不治&lt;/p&gt;
&lt;p&gt;問題很明顯的就是Intel C2000 系列 CPU 的瑕疵&lt;/p&gt;
&lt;p&gt;總之，機器老早就過保了，上面放的是 proxmox 的 vm 檔案&lt;/p&gt;
&lt;p&gt;在NAS掛點之後，就從備份檔把這些VM還原回來了&lt;/p&gt;
&lt;p&gt;想說網路上很多文章說只要焊一個電阻上去就可以修復&lt;/p&gt;
&lt;p&gt;就把機器和硬碟先放著，等有空再去買電阻回來玩玩看&lt;/p&gt;
&lt;p&gt;結果user今天早上就在靠腰，說上面有一台開發用的VM上面的歷史紀錄很重要&lt;/p&gt;
&lt;p&gt;幹，很重要是不會自己備份逆？&lt;/p&gt;
&lt;p&gt;又不跟我說很重要，要備份，然後自己也不做備份&lt;/p&gt;
&lt;p&gt;然後現在VM 不見了，再來靠腰？？&lt;/p&gt;
&lt;p&gt;幹！真的不要以為資訊公司的員工就比較有sense ，屁！&lt;/p&gt;
&lt;p&gt;不過呢，人微言輕，還是只好鼻子摸摸，想辦法救出來&lt;/p&gt;
&lt;p&gt;然後就找到了群暉的這篇文章&lt;/p&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.synology.com/zh-tw/knowledgebase/DSM/tutorial/Storage/How_can_I_recover_data_from_my_DiskStation_using_a_PC&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://www.synology.com/zh-tw/knowledgebase/DSM/tutorial/Storage/How_can_I_recover_data_from_my_DiskStation_using_a_PC&lt;/a&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;25
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;26
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;如何使用電腦復原存放在 Synology NAS 上的資料？
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;若您的 Synology NAS 故障，可以輕鬆透過電腦與 Ubuntu Live CD 復原資料。請確認 Synology NAS 硬碟上運行的檔案系統是 EXT4 或 Btrfs，並依照下列步驟來復原資料。此處將以 Ubuntu 18.04 版本作為範例：
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;1.準備一台電腦，該電腦必須具備足夠的硬碟插槽以安裝從 Synology NAS 取出的硬碟。
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;2.將硬碟從 Synology NAS 取出，並安裝到電腦。若使用 RAID 或 SHR 配置，您必須將所有硬碟 (Hot Spare 硬碟除外) 同時安裝到電腦。
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;3.按照此教學 Create a bootable USB stick on Windows 來建立 Ubuntu 環境。
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;4.前往左下角的顯示應用程式選單。
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;5.在搜尋欄位輸入 Terminal 並選擇終端機。
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;6.若 Synology NAS 上的磁碟配置為 RAID 或 SHR，請依照步驟 7 到 10 操作；若您想復原的檔案位於僅使用一顆硬碟的基本儲存類型機種，請跳至步驟 10。
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;7.輸入以下指令 (sudo 會將執行權限轉換為 root )。
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    Ubuntu@ubuntu:~$ sudo -i
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;8.輸入以下指令來安裝 mdadm 和 lvm2 (皆為 RAID 管理工具)。若沒有安裝 lvm2，vgchange 將無法運作。
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    root@ubuntu:~$ apt-get update
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    root@ubuntu:~$ apt-get install -y mdadm lvm2
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;9.輸入以下指令來掛載所有從 Synology NAS 取出的硬碟，結果可能會因 Synology NAS 上的儲存集區配置而有所不同。
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    root@ubuntu:~$ mdadm -Asf &amp;amp;&amp;amp; vgchange -ay
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;10.輸入以下指令來將所有硬碟掛載為唯讀以存取資料。在 ${device_path} 輸入裝置路徑，${mount_point} 輸入掛載點，您的資料將會被置於掛載點的路徑。
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    $ mount ${device_path} ${mount_point} -o ro
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;好， 1-9 都沒什麼問題，但是有人可以幫忙翻譯翻譯 10 是在工三小？&lt;/p&gt;
&lt;p&gt;當然，我能理解因為每一臺NAS的環境不同，所以會有一些不同的變數&lt;/p&gt;
&lt;p&gt;但是假如你是一個單純的user ，只是想要救資料，好不容易找了臺電腦&lt;/p&gt;
&lt;p&gt;把硬碟都接上去，用ubuntu liveCD 開機，乖乖做了1-9的步驟&lt;/p&gt;
&lt;p&gt;接著一定會傻眼， 什麼是 ${device_path} ?? 什麼是 ${mount_point} ???&lt;/p&gt;
&lt;p&gt;寫文件的人你就不能配合個圖片，去說明應該要怎麼辨別 device_path ? mount_point 又是什麼？&lt;/p&gt;
&lt;p&gt;這很簡單呀！&lt;/p&gt;
&lt;p&gt;做完 9 的指令，其實就會回復你 NAS 分割區的名稱&lt;/p&gt;
&lt;p&gt;好像叫什麼 vg1 的 &amp;lt;&amp;mdash;這個就是變數，可能每一臺都不同，但是你起碼做個範例給人家看啊！&lt;/p&gt;
&lt;p&gt;然後會在 /dev/vg1 底下看到當初建立的磁區 (我的叫 volume_1)&lt;/p&gt;
&lt;p&gt;至於 mount_point 就是看你要掛載到系統的哪個目錄底下&lt;/p&gt;
&lt;p&gt;所以我就要執行&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;mount /dev/vg1/volume_1 /mnt
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;這樣就可以把NAS上的分割給掛進liveCD ，就可以進行資料複製了！&lt;/p&gt;
&lt;p&gt;連一份文件都做不好，真的是服了這些據說很高薪的「工程師」..&lt;/p&gt;</description>
        </item>
        
    </channel>
</rss>
